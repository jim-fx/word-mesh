{"version":3,"file":"bundle.umd.js","sources":["../src/index.ts"],"sourcesContent":["import d3 from \"d3\";\n\nconst svg = d3.select(\"svg\"),\n  width = +svg.attr(\"width\"),\n  height = +svg.attr(\"height\");\n\nconst color = d3.scaleOrdinal(d3.schemeCategory20);\n\nconst simulation = d3\n  .forceSimulation()\n  .force(\n    \"link\",\n    d3.forceLink().id(function (d) {\n      return d.id;\n    })\n  )\n  .force(\"charge\", d3.forceManyBody())\n  .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nfunction createGraph(graph) {\n  var link = svg\n    .append(\"g\")\n    .attr(\"class\", \"links\")\n    .selectAll(\"line\")\n    .data(graph.links)\n    .enter()\n    .append(\"line\")\n    .attr(\"stroke-width\", function (d) {\n      return Math.sqrt(d.value);\n    });\n\n  var node = svg\n    .append(\"g\")\n    .attr(\"class\", \"nodes\")\n    .selectAll(\"g\")\n    .data(graph.nodes)\n    .enter()\n    .append(\"g\");\n\n  var circles = node\n    .append(\"circle\")\n    .attr(\"r\", 5)\n    .attr(\"fill\", function (d) {\n      return color(d.group);\n    })\n    .call(\n      d3\n        .drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended)\n    );\n\n  var lables = node\n    .append(\"text\")\n    .text(function (d) {\n      return d.id;\n    })\n    .attr(\"x\", 6)\n    .attr(\"y\", 3);\n\n  node.append(\"title\").text(function (d) {\n    return d.id;\n  });\n\n  simulation.nodes(graph.nodes).on(\"tick\", ticked);\n\n  simulation.force(\"link\").links(graph.links);\n\n  function ticked() {\n    link\n      .attr(\"x1\", function (d) {\n        return d.source.x;\n      })\n      .attr(\"y1\", function (d) {\n        return d.source.y;\n      })\n      .attr(\"x2\", function (d) {\n        return d.target.x;\n      })\n      .attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n\n    node.attr(\"transform\", function (d) {\n      return \"translate(\" + d.x + \",\" + d.y + \")\";\n    });\n  }\n}\n\nd3.json(\"miserables.json\", function (error, graph) {\n  if (error) throw error;\n  createGraph(graph);\n});\n\nfunction dragstarted(d) {\n  if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n}\n"],"names":["const","svg","select","width","attr","height","color","d3","scaleOrdinal","schemeCategory20","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","dragstarted","event","active","alphaTarget","restart","fx","x","fy","y","dragged","dragended","json","error","graph","link","append","selectAll","data","links","enter","Math","sqrt","value","node","nodes","group","call","drag","on","text","source","target","createGraph"],"mappings":"sKAEAA,IAAMC,iDAASC,OAAO,OACpBC,GAASF,EAAIG,KAAK,SAClBC,GAAUJ,EAAIG,KAAK,UAEfE,EAAQC,EAAGC,aAAaD,EAAGE,kBAE3BC,EAAaH,EAChBI,kBACAC,MACC,OACAL,EAAGM,YAAYC,GAAG,SAAUC,UACnBA,EAAED,MAGZF,MAAM,SAAUL,EAAGS,iBACnBJ,MAAM,SAAUL,EAAGU,YAAYd,EAAQ,EAAGE,EAAS,IA8EtD,SAASa,EAAYH,GACdR,EAAGY,MAAMC,QAAQV,EAAWW,YAAY,IAAKC,UAClDP,EAAEQ,GAAKR,EAAES,EACTT,EAAEU,GAAKV,EAAEW,EAGX,SAASC,EAAQZ,GACfA,EAAEQ,GAAKhB,EAAGY,MAAMK,EAChBT,EAAEU,GAAKlB,EAAGY,MAAMO,EAGlB,SAASE,EAAUb,GACZR,EAAGY,MAAMC,QAAQV,EAAWW,YAAY,GAC7CN,EAAEQ,GAAK,KACPR,EAAEU,GAAK,KAnBTlB,EAAGsB,KAAK,kBAAmB,SAAUC,EAAOC,MACtCD,EAAO,MAAMA,GAxEnB,SAAqBC,OACfC,EAAO/B,EACRgC,OAAO,KACP7B,KAAK,QAAS,SACd8B,UAAU,QACVC,KAAKJ,EAAMK,OACXC,QACAJ,OAAO,QACP7B,KAAK,eAAgB,SAAUW,UACvBuB,KAAKC,KAAKxB,EAAEyB,SAGnBC,EAAOxC,EACRgC,OAAO,KACP7B,KAAK,QAAS,SACd8B,UAAU,KACVC,KAAKJ,EAAMW,OACXL,QACAJ,OAAO,KAEIQ,EACXR,OAAO,UACP7B,KAAK,IAAK,GACVA,KAAK,OAAQ,SAAUW,UACfT,EAAMS,EAAE4B,SAEhBC,KACCrC,EACGsC,OACAC,GAAG,QAAS5B,GACZ4B,GAAG,OAAQnB,GACXmB,GAAG,MAAOlB,IAGJa,EACVR,OAAO,QACPc,KAAK,SAAUhC,UACPA,EAAED,KAEVV,KAAK,IAAK,GACVA,KAAK,IAAK,GAEbqC,EAAKR,OAAO,SAASc,KAAK,SAAUhC,UAC3BA,EAAED,KAGXJ,EAAWgC,MAAMX,EAAMW,OAAOI,GAAG,kBAK/Bd,EACG5B,KAAK,KAAM,SAAUW,UACbA,EAAEiC,OAAOxB,IAEjBpB,KAAK,KAAM,SAAUW,UACbA,EAAEiC,OAAOtB,IAEjBtB,KAAK,KAAM,SAAUW,UACbA,EAAEkC,OAAOzB,IAEjBpB,KAAK,KAAM,SAAUW,UACbA,EAAEkC,OAAOvB,IAGpBe,EAAKrC,KAAK,YAAa,SAAUW,SACxB,aAAeA,EAAES,EAAI,IAAMT,EAAEW,EAAI,QAlB5ChB,EAAWE,MAAM,QAAQwB,MAAML,EAAMK,OAyBrCc,CAAYnB"}