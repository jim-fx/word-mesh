{"version":3,"file":"bundle.js","sources":["../src/index.ts"],"sourcesContent":["import d3 from \"d3\";\n\nconst svg = d3.select(\"svg\"),\n  width = +svg.attr(\"width\"),\n  height = +svg.attr(\"height\");\n\nconst color = d3.scaleOrdinal(d3.schemeCategory20);\n\nconst simulation = d3\n  .forceSimulation()\n  .force(\n    \"link\",\n    d3.forceLink().id(function (d) {\n      return d.id;\n    })\n  )\n  .force(\"charge\", d3.forceManyBody())\n  .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nfunction createGraph(graph) {\n  var link = svg\n    .append(\"g\")\n    .attr(\"class\", \"links\")\n    .selectAll(\"line\")\n    .data(graph.links)\n    .enter()\n    .append(\"line\")\n    .attr(\"stroke-width\", function (d) {\n      return Math.sqrt(d.value);\n    });\n\n  var node = svg\n    .append(\"g\")\n    .attr(\"class\", \"nodes\")\n    .selectAll(\"g\")\n    .data(graph.nodes)\n    .enter()\n    .append(\"g\");\n\n  var circles = node\n    .append(\"circle\")\n    .attr(\"r\", 5)\n    .attr(\"fill\", function (d) {\n      return color(d.group);\n    })\n    .call(\n      d3\n        .drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended)\n    );\n\n  var lables = node\n    .append(\"text\")\n    .text(function (d) {\n      return d.id;\n    })\n    .attr(\"x\", 6)\n    .attr(\"y\", 3);\n\n  node.append(\"title\").text(function (d) {\n    return d.id;\n  });\n\n  simulation.nodes(graph.nodes).on(\"tick\", ticked);\n\n  simulation.force(\"link\").links(graph.links);\n\n  function ticked() {\n    link\n      .attr(\"x1\", function (d) {\n        return d.source.x;\n      })\n      .attr(\"y1\", function (d) {\n        return d.source.y;\n      })\n      .attr(\"x2\", function (d) {\n        return d.target.x;\n      })\n      .attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n\n    node.attr(\"transform\", function (d) {\n      return \"translate(\" + d.x + \",\" + d.y + \")\";\n    });\n  }\n}\n\nd3.json(\"miserables.json\", function (error, graph) {\n  if (error) throw error;\n  createGraph(graph);\n});\n\nfunction dragstarted(d) {\n  if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n}\n"],"names":["svg","d3","select","width","attr","height","color","scaleOrdinal","schemeCategory20","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","dragstarted","event","active","alphaTarget","restart","fx","x","fy","y","dragged","dragended","json","error","graph","link","append","selectAll","data","links","enter","Math","sqrt","value","node","nodes","group","call","drag","on","text","source","target","createGraph"],"mappings":"yEAEMA,EAAMC,EAAGC,OAAO,OACpBC,GAASH,EAAII,KAAK,SAClBC,GAAUL,EAAII,KAAK,UAEfE,EAAQL,EAAGM,aAAaN,EAAGO,kBAE3BC,EAAaR,EAChBS,kBACAC,MACC,OACAV,EAAGW,YAAYC,GAAG,SAAUC,UACnBA,EAAED,MAGZF,MAAM,SAAUV,EAAGc,iBACnBJ,MAAM,SAAUV,EAAGe,YAAYb,EAAQ,EAAGE,EAAS,IA8EtD,SAASY,EAAYH,GACdb,EAAGiB,MAAMC,QAAQV,EAAWW,YAAY,IAAKC,UAClDP,EAAEQ,GAAKR,EAAES,EACTT,EAAEU,GAAKV,EAAEW,EAGX,SAASC,EAAQZ,GACfA,EAAEQ,GAAKrB,EAAGiB,MAAMK,EAChBT,EAAEU,GAAKvB,EAAGiB,MAAMO,EAGlB,SAASE,EAAUb,GACZb,EAAGiB,MAAMC,QAAQV,EAAWW,YAAY,GAC7CN,EAAEQ,GAAK,KACPR,EAAEU,GAAK,KAnBTvB,EAAG2B,KAAK,kBAAmB,SAAUC,EAAOC,MACtCD,EAAO,MAAMA,GAxEnB,SAAqBC,OACfC,EAAO/B,EACRgC,OAAO,KACP5B,KAAK,QAAS,SACd6B,UAAU,QACVC,KAAKJ,EAAMK,OACXC,QACAJ,OAAO,QACP5B,KAAK,eAAgB,SAAUU,UACvBuB,KAAKC,KAAKxB,EAAEyB,SAGnBC,EAAOxC,EACRgC,OAAO,KACP5B,KAAK,QAAS,SACd6B,UAAU,KACVC,KAAKJ,EAAMW,OACXL,QACAJ,OAAO,KAEIQ,EACXR,OAAO,UACP5B,KAAK,IAAK,GACVA,KAAK,OAAQ,SAAUU,UACfR,EAAMQ,EAAE4B,SAEhBC,KACC1C,EACG2C,OACAC,GAAG,QAAS5B,GACZ4B,GAAG,OAAQnB,GACXmB,GAAG,MAAOlB,IAGJa,EACVR,OAAO,QACPc,KAAK,SAAUhC,UACPA,EAAED,KAEVT,KAAK,IAAK,GACVA,KAAK,IAAK,GAEboC,EAAKR,OAAO,SAASc,KAAK,SAAUhC,UAC3BA,EAAED,KAGXJ,EAAWgC,MAAMX,EAAMW,OAAOI,GAAG,kBAK/Bd,EACG3B,KAAK,KAAM,SAAUU,UACbA,EAAEiC,OAAOxB,IAEjBnB,KAAK,KAAM,SAAUU,UACbA,EAAEiC,OAAOtB,IAEjBrB,KAAK,KAAM,SAAUU,UACbA,EAAEkC,OAAOzB,IAEjBnB,KAAK,KAAM,SAAUU,UACbA,EAAEkC,OAAOvB,IAGpBe,EAAKpC,KAAK,YAAa,SAAUU,SACxB,aAAeA,EAAES,EAAI,IAAMT,EAAEW,EAAI,QAlB5ChB,EAAWE,MAAM,QAAQwB,MAAML,EAAMK,OAyBrCc,CAAYnB"}